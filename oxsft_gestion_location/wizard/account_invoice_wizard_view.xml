<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>
		<record model="ir.ui.view" id="account_invoice_wizard_view">
			<field name="name">account.invoice.wizard.form</field>
			<field name="model">account.invoice.wizard</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Assistant de génération de factures client">
					<group>
					   <field name="type_facture_id" />
						<field name="mro_id" invisible="1"/>
					</group>
					<footer>
                    	<button string="Générer"
                                name="create_invoice"
                                type="object"
                                class="oe_highlight" />
                        	or
                      	<button string="Cancel"
                                class="oe_link"
                                special="cancel" />
					</footer>
				</form>
			</field>
		</record>

   		<act_window id="account_invoice_wizard_action"
            name="Assistant facture client"
            src_model="mro.order"
            res_model="account.invoice.wizard"
            view_type="form" view_mode="form"
            key2="client_action_multi" target="new"
            />

		<record model="ir.ui.view" id="invoice_form_wizard">
			<field name="name">account.invoice.preview.wizard.form</field>
			<field name="model">account.invoice.preview.wizard</field>
			<field name="mode">primary</field>
			<field name="inherit_id" ref="account.invoice_form" />
			<field name="arch" type="xml">
				<form position="attributes">
					<attribute name="string">Pré facturation</attribute>
				</form>
				 <header position="replace">
                	<button string="Créer la facture"
                                name="create_invoice"
                                type="object"
                                class="oe_highlight" />
                    or
                	<button string="Cancel"
                                class="oe_link"
                                special="cancel" />
                    <field invisible="1" name="state" widget="statusbar" statusbar_visible="draft" statusbar_colors='{"proforma":"blue","proforma2":"blue"}'/>
				 </header>
			</field>
		</record>	

        <record id="action_invoice_preview" model="ir.actions.act_window">
            <field name="name">Facture client</field>
            <field name="res_model">account.invoice.preview.wizard</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field eval="invoice_form_wizard" name="view_id"/>
            <field name="target">new</field>
            <field name="domain">[('type','=','out_invoice')]</field>
            <field name="context">{'default_type':'out_invoice', 'type':'out_invoice', 'journal_type': 'sale'}</field>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to create a customer invoice.
              </p><p>
                Odoo's electronic invoicing allows to ease and fasten the
                collection of customer payments. Your customer receives the
                invoice by email and he can pay online and/or import it
                in his own system.
              </p><p>
                The discussions with your customer are automatically displayed at
                the bottom of each invoice.
              </p>
            </field>
        </record>


		<record model="ir.ui.view" id="account_invoice_contract_wizard_view">
			<field name="name">account.invoice.contract.wizard.form</field>
			<field name="model">account.invoice.contract.wizard</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Assistant de génération de factures client">
					<group col="6">
					   	<field name="echeance"/>
					   	<field name="date_invoice" />
					   	<field name="period_id" options="{'no_create':True}"/>
					</group>

					<group col="4">
						<field name="company_id" options="{'no_create':True}"/>
					    <field name="agence_id" options="{'no_create':True}"/>
					</group>
					<group col="4">
						<field name="type_id" options="{'no_create':True}"/>
					    <field name="frequency" />
					</group>
					<group col="4">
						<field name="partner_id" options="{'no_create':True}" domain="[('customer','=',True)]"/>
					    <field name="contract_id" options="{'no_create':True}"/>
					</group>
					<group col="4">
						<field name="date_end" />
						<field name="validate_invoices" />
					</group>
					<footer>
                    	<button string="Générer"
                                name="action_validate"
                                type="object"
                                class="oe_highlight" />
                        	or
                      	<button string="Cancel"
                                class="oe_link"
                                special="cancel" />
					</footer>
				</form>
			</field>
		</record>

        <record id="action_account_invoice_contract_wizard" model="ir.actions.act_window">
            <field name="name">Factures mensuelles</field>
            <field name="res_model">account.invoice.contract.wizard</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
            <field name="context">{}</field>
        </record>
	</data>
</openerp>